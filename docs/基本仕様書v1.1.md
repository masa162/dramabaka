# ドラマバカ一代 基本仕様書 v1.1

## 📋 プロジェクト基本情報

### サイト情報
- **プロジェクト名**: ドラマバカ一代
- **サイトURL**: https://dramabaka.com
- **動作確認URL**: https://dramabaka.com/drama/1301
- **リポジトリ**: https://github.com/masa162/dramabaka
- **ドメイン管理**: Namecheap
- **デプロイ**: Vercel自動デプロイ

### プロジェクト概要
- **コンセプト**: 見すぎて頭おかしくなったヤツらの感想サイト
- **サブタイトル**: 
- **キャッチコピー**: 
- **ターゲットユーザー**: 40代over↑の民度低い（いい意味で）地上波ドラマ好き日本人
- **サイトジャンル**: ドラマレビュー・コミュニティサイト

---

## 🎯 開発思想・方向性

### 基本思想
- **2000年代ブログ文化の再現**: 懐かしさを感じる層向けのデザイン・UI
- **中毒化メカニズム**: 「見ると書きたくなる、書くと見たくなる」サイクル
- **コミュニティ形成**: 匿名だが個性的なニックネームによる仲間意識
- **参加ハードル最小化**: 3クリックで投稿完了する手軽さ

### ユーザー体験設計
- **即時満足**: 投稿と同時にリアルタイム表示
- **承認欲求充足**: いいね機能・統計表示
- **競争心煽り**: バカ度ランキング・比較機能
- **コミュニティ感**: 「同じ穴のムジナ」による仲間意識

### 運用思想（v1.1追加）
- **自動化優先**: 手動作業の最小化（週5時間以内）
- **データ品質保証**: 型安全性100%確保
- **事故防止**: シンプルなURL設計とCSV管理
- **スケーラビリティ**: 10年間1000本対応設計

---

## 🎨 デザイン方向性

### デザインコンセプト
- **2000年代Web再現**: 当時のサイトデザインを忠実に再現
- **ノスタルジー重視**: モダンデザインは絶対禁止
- **レトロ感統一**: 全ページで一貫したレトロ感

### カラーパレット
```css
:root {
  --retro-orange: #ff6600;    /* ヘッダーグラデーション */
  --retro-blue: #0066cc;      /* メニューバー */
  --retro-red: #ff0000;       /* 警告・強調 */
  --retro-green: #009900;     /* 成功・更新 */
  --retro-yellow: #ffff00;    /* アクセント・背景 */
  --retro-gray: #f0f0f0;      /* 基本背景 */
}
```

### タイポグラフィ
- **メインフォント**: MS UI Gothic（全体統一）
- **フォントサイズ**: 12px（基本）、11px（モバイル）
- **行間**: 1.4

### UI要素
- **ボタンデザイン**: 立体ボタン（outset/inset border）
- **背景**: linear-gradient多用
- **アニメーション**: CSS keyframes（点滅等）
- **レイアウト**: テーブルレイアウト風
- **レスポンシブ**: モバイルファースト対応

---

## ⚙️ 技術仕様

### フロントエンド
- **フレームワーク**: Next.js 15.3.5
- **言語**: TypeScript（100%型安全）
- **スタイリング**: 手書きCSS（CSSフレームワーク使用禁止）
- **状態管理**: React hooks + localStorage
- **ビルド**: 静的サイト生成（SSG）32ページ対応

### データ管理（v1.1大幅刷新）
- **主要データ**: CSV形式（dramas_master.csv、archives_summary.csv）
- **URL設計**: シンプル連番ID（/drama/1301、/drama/1302...）
- **ID体系**: 年度別範囲管理（1300-1399: 2025年、1400-1499: 2026年）
- **検証**: 自動CSVバリデーション
- **バックアップ**: Git管理 + 定期バックアップ

### 開発環境
- **Node.js**: v22.17.0 (nvm管理)
- **パッケージマネージャー**: npm v10.9.2
- **ビルドツール**: Next.js
- **型チェック**: TypeScript
- **リンター**: ESLint
- **運用ツール**: 自作CLI（drama-helper.js、csv-validator.js）

### インフラ・デプロイ
- **ホスティング**: Vercel
- **ドメイン**: dramabaka.com (Namecheap)
- **SSL**: 自動対応
- **CDN**: Vercel標準
- **監視**: CSV検証 + ビルド監視
- **デプロイフロー**: Git Push → 自動ビルド → 静的サイト更新

---

## 📊 機能仕様

### 実装完了機能（Phase 2完了、v1.1拡張）
- ✅ **番組詳細ページ**: 動的ルーティング `/drama/ID`（シンプル連番）
- ✅ **レビュー投稿システム**: 3段階フロー（感情→バカ度→感想）
- ✅ **レビュー表示システム**: リアルタイム更新・ソート・フィルター
- ✅ **いいね機能**: 「同じ穴のムジナ」ボタン
- ✅ **統計システム**: 総数・平均・最高バカ度表示
- ✅ **バカ度システム**: 🧠〜🧠🧠🧠🧠🧠（5段階）
- ✅ **アーカイブシステム**: ハイブリッド形式（今季+過去階層）
- ✅ **季別詳細ページ**: `/archives/年/季節` 動的ルーティング
- ✅ **CSV管理システム**: 俯瞰可能なデータ管理

### 運用支援機能（v1.1新規）
- ✅ **自動CSV検証**: データ品質保証
- ✅ **統計表示ツール**: 運用状況可視化
- ✅ **ドラマ追加ツール**: ワンコマンド追加
- ✅ **ID管理ツール**: 自動連番生成
- ✅ **検索ツール**: 高速データ検索

### Phase 3実装候補
- 🔲 **バカ度ランキング強化**: 今日の最高・週間チャンピオン・殿堂入り
- 🔲 **廃人認定バッジシステム**: ゲーミフィケーション要素
- 🔲 **シェア機能**: SNS連携・ウイルス拡散
- 🔲 **中毒度メーター**: 参加度可視化

### 将来実装候補
- 🔲 **API化**: RESTful API対応（2年後）
- 🔲 **データベース移行**: PostgreSQL対応（3年後）
- 🔲 **外部連携**: TVガイドAPI、SNSデータ（3年後）

---

## 🗂️ ファイル構成（v1.1実装済み）

### プロジェクト構造
```
dramabaka/
├── src/
│   ├── app/                         # Next.js App Router
│   │   ├── drama/
│   │   │   ├── [id]/                # 新: シンプルID形式
│   │   │   │   └── page.tsx
│   │   │   └── [...slug]/           # 旧: 互換性維持
│   │   │       └── page.tsx
│   │   ├── archives/                # ハイブリッドアーカイブ
│   │   │   ├── page.tsx             # メインページ
│   │   │   └── [year]/[season]/     # 季別詳細
│   │   │       └── page.tsx
│   │   ├── layout.tsx
│   │   └── globals.css
│   ├── components/                  # コンポーネント分離済み
│   │   ├── archives/                # アーカイブ専用
│   │   │   ├── CurrentSeasonList.tsx
│   │   │   ├── YearlyArchive.tsx
│   │   │   └── SeasonDetail.tsx
│   │   ├── drama/                   # 番組関連
│   │   ├── review/                  # レビュー関連
│   │   ├── layout/                  # レイアウト関連
│   │   └── common/                  # 共通コンポーネント
│   ├── hooks/                       # カスタムフック
│   ├── lib/                         # ユーティリティ・型定義
│   │   └── data/                    # データ管理
│   │       ├── dramas_master.csv    # 新: メインデータ
│   │       ├── archives_summary.csv # 新: アーカイブサマリー
│   │       ├── csv-parser.ts        # 新: CSV解析
│   │       ├── archives.ts          # 新: アーカイブ処理
│   │       └── drama-mapping.ts     # 新: URL変換
│   └── data/                        # 静的データ（継承）
├── scripts/                         # 新: 運用支援ツール
│   ├── csv-validator.js             # CSV検証
│   └── drama-helper.js              # ドラマ管理CLI
├── content/                         # Markdownファイル
├── docs/                            # プロジェクト文書
│   ├── 基本仕様書v1.1.md            # 更新版
│   ├── UIUX仕様書v1.0.md
│   ├── データ管理ベストプラクティス.md # 新規
│   └── 運用手順書.md                # 新規
└── public/                          # 静的ファイル
```

---

## 🔗 URL設計（v1.1大幅刷新）

### 新URL体系（推奨）
```
/drama/1301                          # べらぼう
/drama/1302                          # あんぱん
/drama/1303                          # 誘拐の日
/archives                            # アーカイブトップ
/archives/2024/autumn                # 2024年秋季詳細
```

### 旧URL体系（互換性維持）
```
/drama/2025/winter/nhk/taiga/berabou # 旧形式（自動変換）
```

### ID体系ルール
```
1001-1099: 2022年（99本まで）
1100-1199: 2023年（99本まで）
1200-1299: 2024年（99本まで）
1300-1399: 2025年（99本まで）
1400-1499: 2026年（99本まで）
```

---

## 🚀 運用方針（v1.1詳細化）

### 開発・保守方針
- **持続可能性**: 週5時間以内の運用負荷
- **自動化優先**: 手動作業最小化
- **品質保証**: CSV検証100%実施
- **拡張性確保**: 将来機能追加の容易さ

### データ運用方針
- **週次運用**: 新ドラマ追加（5-10分）
- **季節切り替え**: アーカイブ化（20-30分）
- **年次運用**: 統計レポート・バックアップ（1時間）
- **緊急対応**: ロールバック・復旧手順完備

### 運用支援ツール
```bash
# CSV検証
npm run validate-csv

# 統計確認
npm run drama:stats

# 新ドラマ追加
npm run drama:add -- --title "新番組" --broadcaster "フジ" --timeslot "月9"

# 次ID確認
npm run drama:next-id

# ドラマ検索
npm run drama:search "キーワード"

# 状態更新
npm run drama:update-status 1301 completed
```

### パフォーマンス方針
- **ページ表示速度**: < 2秒
- **ビルド時間**: < 3分（32ページ静的生成）
- **サーバー負荷**: localStorage活用でゼロ負荷
- **モバイル対応**: レスポンシブ必須
- **SEO対策**: 静的サイト生成で高速表示

---

## 📈 KPI・目標

### 技術目標（v1.1追加）
- **ビルド成功率**: > 99%
- **CSV検証エラー率**: < 1%
- **運用作業時間**: 週5時間以内
- **データ品質**: TypeScript型安全性100%

### 定量目標
- **月間PV**: 
- **DAU**: 
- **投稿数/日**: 
- **リピート率**: 

### 定性目標
- **ユーザー満足度**: 
- **コミュニティ活性度**: 
- **ブランド認知**: 

---

## 🔒 セキュリティ・プライバシー

### セキュリティ方針
- **データ保護**: Git管理 + 定期バックアップ
- **認証**: 管理者のみGitHub認証
- **脆弱性対策**: npm audit定期実行

### プライバシー方針
- **個人情報取扱い**: 最小限のデータ収集
- **Cookie使用**: localStorage利用
- **匿名性保護**: ニックネーム自動生成

---

## 📞 連絡先・管理

### プロジェクト管理
- **プロジェクトオーナー**: 
- **開発責任者**: 
- **運用責任者**: 

### 外部サービス
- **ドメイン管理**: Namecheap
- **ホスティング**: Vercel
- **リポジトリ**: GitHub
- **分析ツール**: 

---

## 📄 更新履歴

| バージョン | 日付 | 更新内容 | 更新者 |
|------------|------|----------|--------|
| v1.1 | 2025-07-16 | **大幅アップデート**<br/>・URL設計刷新（シンプル連番ID）<br/>・CSV管理システム導入<br/>・アーカイブシステム実装<br/>・運用自動化ツール追加<br/>・ファイル構成分離完了<br/>・32ページ静的生成対応 | Claude Code |
| v1.0 | 2025-07-13 | 初版作成 | Claude Code |

### v1.1 主要変更点詳細

#### 🔄 URL設計の刷新
- **旧**: `/drama/2025/winter/nhk/taiga/berabou`
- **新**: `/drama/1301`
- **効果**: URL短縮、管理簡素化、階層移動時の事故防止

#### 📊 データ管理の革新
- **旧**: TypeScriptファイルでハードコーディング
- **新**: CSV形式で俯瞰管理
- **効果**: 運用効率化、品質保証、拡張性確保

#### 🏗️ アーキテクチャの進化
- **コンポーネント分離**: 保守性向上
- **動的ルーティング**: 12ページ自動生成
- **型安全性**: 100%TypeScript対応

#### 🛠️ 運用支援の充実
- **自動化ツール**: 週5時間運用実現
- **品質保証**: CSV検証100%
- **緊急対応**: 完全なバックアップ・復旧体制

---

## 📝 補足・備考

### 重要な制約事項
- **既存機能への影響回避**: Phase 1・2で実装済み機能の保護
- **2000年代風デザイン継承**: モダンデザイン要素の混入禁止
- **パフォーマンス配慮**: 軽量実装・依存関係最小化
- **後方互換性**: 旧URL形式のサポート継続

### 開発時の注意点
- **TypeScript型安全**: 100%型定義必須
- **CSV管理**: データ変更はvalidation必須
- **レスポンシブ対応**: モバイルファースト
- **運用ツール活用**: 手動作業は最小限に

### v1.1の技術的成果
- **静的サイト生成**: 32ページ（従来比+12ページ）
- **ビルド時間**: 3分以内（目標達成）
- **パフォーマンス**: 軽量化維持
- **拡張性**: 10年間運用設計完了

---

*この仕様書は随時更新されます。重要な変更がある場合は、適宜マイナーバージョンアップを行ってください。*